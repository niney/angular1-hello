<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="bower_components/angular/angular.js"></script>
    <link rel="stylesheet" href="https://eventmarket.coolschool.co.kr/common/css/common.css" />
    <link rel="stylesheet" href="https://eventmarket.coolschool.co.kr/common/css/colorbox.css" />
</head>
<body>


<div ng-app="app" ng-controller="MarketCtrl">
    <div id="header">
        <div class="inner-page">
            <a id="mainLog" href="#"><h1>CoolMarket</h1></a>
            <ul class="mainNav">
                <li class="on"><a id="thisWeekCoolDeal" href="#">금주의 쿨딜</a></li>
                <li><a href="/mypage">마이페이지</a></li>
                <li><a href="/board/boardList">문의게시판</a></li>
            </ul>
        </div>
    </div>
    <div id="contents">
        <div class="inner-page">
            <div class="topInfo">
                <img class="topItemImg" src="https://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/갤러리1.jpg"
                     alt="예제 상품"/>
                <div class="topText">
                    <h2>[쿨딜] 버켄스탁 데이브백</h2>
                    <p class="prevPriceWrap"><span class="prevPrice"></span> 원</p>
                    <p class="salePriceWrap"><span class="salePrice"></span> 원</p>
                    <p class="option">
                        <label>옵션1</label>
                        <select ng-change="sel()" ng-model="data.model">
                            <option value="">선택</option>
                            <option ng-repeat="option in data.availableOptions" value="{{option.id}}">{{option.name}}</option>
                        </select>
                    </p>
                    <p ng-repeat="o in orderList" class="quantity">
                        <label>수량</label>
                        {{o.name}}, {{o.price}}
                        <a ng-click="minus(o)" ng-hide="o.num <= 0" class="minusBtn"></a>
                        <span class="number">{{o.num}}</span>
                        <a ng-click="add(o)" class="plusBtn"></a>
                        <input type="text" ng-model="o.num"/>
                    </p>
                    <p class="deliveryInfo">
                        <b>·</b>구매가능기간 : 2016/07/21 ~ 2016/07/27 <br>
                        <b>·</b>배송정보 : 당일 오후 3시까지 입금하여야 익일 배송 되며 배송기간은 2~3일정도 소요됩니다. (주말/공휴일 제외) <br>
                        <b>·</b>배송비 : 2500원 <br>
                    </p>


                    <div class="selectBoxWrap">
					<span id="optionPurchaseInfo">
						<div id="purchaseStep1"></div>
						<div id="purchaseStep2">
							총 주문 금액 : <span id="totalPurchasePrice">{{totalPurchasePrice | number}}</span> 원
						</div>
					</span>
                    </div>
                    <p><a href="#" class="buyBtn">구매하기</a></p>

                </div>

            </div>
            <ul class="itemTab">
                <li class="on"><a href="#" role="detailInfo">상세정보</a></li>
                <li><a href="#" role="etcInfo">교환/반품/문의 안내</a></li>
            </ul>

            <div class="detailInfo tabCon">
                <p align="center"><img
                        src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/상품상세텍스트-1.gif"/></p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/01-1.jpg"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/02-1.gif"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/03-1.gif"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/04-1.gif"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/05-1.gif"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/06-1.gif"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/07-1.gif"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/08-1.gif"/>
                </p>
                <p align="center"><img src="http://coolmarket.coolschool.co.kr/wp-content/uploads/2016/07/09-1.gif"/>
                </p>
            </div>
            <div class="etcInfo tabCon hide">
                <dl>
                    <dt>구매/교환/반품 문의</dt>
                    <dd>문의게시판 또는 쿨마켓 고객센터 02-6325-6300(내선7번) / 평일 오전 9시 ~ 오후 6시│토, 일요일 및 공휴일 휴무</dd>
                </dl>
                <dl>
                    <dt>상품 문의</dt>
                    <dd>문의게시판 이용 / 평일 오전 9시 ~ 오후 6시│토, 일요일 및 공휴일 휴무</dd>
                </dl>
                <dl>
                    <dt>쿨마켓 주문/배송안내</dt>
                    <dd>· 주문 및 입금 확인은 쿨마켓 마이페이지에서 가능합니다.</dd>
                    <dd>· 금일 3시까지 입금된 건에 한하여 익일 발송 되며 배송기간은 2~3일 소요됩니다.(주말/공휴일 제외)</dd>
                </dl>
                <dl>
                    <dt>쿨마켓 교환/반품 안내</dt>
                    <dd>· 교환 및 반품은 상품 수령 후 7일 이내 신청해주셔야하며 배송비는 구매자 부담 입니다.</dd>
                    <dd>· 7일이 경과하거나 포장 및 상품가치가 떨어질만큼 훼손된 경우 반품이 불가능 하오니 주의하시기 바랍니다.</dd>
                    <dd>· 구매자의 단순 변심에 의한 교환 및 반품은 구매자가 왕복 배송비 5,000원을 모두 지불해주셔야 합니다.</dd>
                    <dd>· 제품 하자의 경우 물품수령 후 3개월이내, 또는 그 사실을 안 날로부터 30일이내 반품이 가능합니다.</dd>
                </dl>
            </div>
        </div>
    </div>
</div>

</body>



<script type="text/javascript">
    angular.module('app', [])
            .controller('MarketCtrl', function ($scope, $filter) {

                $scope.orderList = [];
                $scope.data = {
                    model: null,
                    availableOptions: [
                        {id: '1', name: 'Option A', price: 1000},
                        {id: '2', name: 'Option B', price: 2000},
                        {id: '3', name: 'Option C', price: 3000}
                    ]
                };

                // 계산
                var cal = function() {
                    var total = 0;
                    for(var o in $scope.orderList) {
                        var order = $scope.orderList[o];
                        total += order.num * order.price;
                    }

                    $scope.totalPurchasePrice = total;
                };

                // 주문한 리스트 변경 감시
                $scope.$watch('orderList', function(newVal, oldVal){
                    cal();
                }, true);

                // 옵션 선택 했을 때
                $scope.sel = function() {
                    var o = $filter('filter')($scope.data.availableOptions, {id: $scope.data.model})[0];
                    if($scope.orderList.indexOf(o) === -1) {
                        o.num = 1;
                        $scope.orderList.push(o);
                    }

                };

                $scope.add = function(o) {
                    o.num++;
                };

                $scope.minus = function (o) {
                    o.num--;
                };

            });
</script>

</html>